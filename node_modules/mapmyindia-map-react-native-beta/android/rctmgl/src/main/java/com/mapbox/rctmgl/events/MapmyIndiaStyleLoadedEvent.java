package com.mapbox.rctmgl.events;

import android.view.View;

import com.facebook.react.bridge.WritableArray;
import com.facebook.react.bridge.WritableMap;
import com.facebook.react.bridge.WritableNativeArray;
import com.facebook.react.bridge.WritableNativeMap;
import com.mapbox.mapboxsdk.maps.style.model.MapmyIndiaStyle;
import com.mapbox.rctmgl.events.constants.EventKeys;
import com.mapbox.rctmgl.events.constants.EventTypes;

import java.util.List;

/**
 * * Created by Saksham on 21-06-2021.
 **/
public class MapmyIndiaStyleLoadedEvent extends AbstractEvent {

    List<MapmyIndiaStyle> mapmyIndiaStyles;

    public MapmyIndiaStyleLoadedEvent(View view, List<MapmyIndiaStyle> mapmyIndiaStyles) {
        super(view, EventTypes.DID_LOADED_MAPMYINDIA_MAP_STYLES);
        this.mapmyIndiaStyles = mapmyIndiaStyles;
    }

    @Override
    public String getKey() {
        return EventKeys.MAP_STYLE_LOADED;
    }

    @Override
    public WritableMap getPayload() {
        WritableArray array = new WritableNativeArray();
        if(mapmyIndiaStyles != null) {
            for(MapmyIndiaStyle style: mapmyIndiaStyles) {
                WritableMap styleMap = new WritableNativeMap();
                styleMap.putString("name", style.getName());
                styleMap.putString("imageUrl", style.getImageUrl());
                styleMap.putString("displayName", style.getDisplayName());
                styleMap.putString("description", style.getDescription());
                array.pushMap(styleMap);
            }
        }
        WritableMap map = new WritableNativeMap();
        map.putArray("mapmyindia_styles", array);
        return map;
    }
}
